(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{869:function(e,r,t){"use strict";t.r(r);var o=t(20),n={head:function(){return{title:"邮箱验证 - Saiblo"}},auth:"guest",data:function(){return{form:{username:"",password:"",loading:!1,sec60:0},err_code:0}},validations:{form:{username:{required:o.required},password:{required:o.required}}},created:function(){this.form.username=this.$route.query.username,void 0!==this.$route.query.sended&&(this.form.sec60=57,this.wait())},methods:{sendEmail:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(this.form.loading=!0,this.$axios.post("/api/users/send_validation/",this.form).then((function(r){e.err_code=0,e.$notify.success({message:"验证邮件已成功发送至 ".concat(r.data.masked_email," 邮箱的垃圾箱，请注意查收！"),title:"成功",timeout:2e3}),e.form.sec60=60,e.wait()})).catch((function(r){e.err_code=r.response.status,403==e.err_code&&(e.form.sec60=r.response.data.err_msg,e.wait())})).then((function(){e.form.loading=!1})))},wait:function(){var e=this;this.form.sec60&&setTimeout((function(){e.form.sec60-=1,e.wait()}),1e3)}}},m=t(7),component=Object(m.a)(n,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("sui-grid",[t("sui-grid-column",{attrs:{computer:7,tablet:10,mobile:16,centered:""}},[t("sui-segment",[t("sui-header",{tag:"h2",attrs:{"text-align":"center"}},[e._v("邮箱验证")]),e._v(" "),t("sui-form",{attrs:{id:"form",method:"post",autocomplete:"off"},on:{submit:function(r){return r.preventDefault(),e.sendEmail(r)}}},[t("sui-form-field",{staticStyle:{textalign:"center"}},[void 0===e.$route.query.sended?t("sui-message",{attrs:{info:""}},[e._v("\n            您的账号尚未通过邮箱验证，因此还无法登陆网站，请先进行邮箱验证以激活您的账号。\n            "),t("br"),e._v("\n            在下方输入密码，之后我们会发送一封验证邮件到您的注册邮箱，点击邮件中的链接即可完成验证。\n          ")]):t("sui-message",{attrs:{info:""}},[e._v("\n            邮件已经成功发送至您邮箱的垃圾箱，点击邮件中的链接即可完成验证。\n            "),t("br"),e._v("\n            如需重新发送邮件，请在下方输入密码并点击发送验证邮件。\n          ")])],1),e._v(" "),t("sui-form-field",{attrs:{error:!(!e.$v.form.username.$error&&!e.err_code)}},[t("sui-input",{attrs:{disabled:"","icon-position":"left",icon:"user",placeholder:"用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("sui-form-field",{attrs:{error:!(!e.$v.form.password.$error&&!e.err_code)}},[t("sui-input",{attrs:{type:"password",disabled:!(!e.form.sec60&&!e.form.loading),"icon-position":"left",icon:"lock",placeholder:"密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),e.$v.form.$error?t("sui-form-field",[t("sui-message",{staticStyle:{"test-align":"center"},attrs:{negative:""}},[t("sui-message-list",[e.$v.form.username.required?e._e():t("sui-message-item",[e._v("用户名不能为空")]),e._v(" "),e.$v.form.password.required?e._e():t("sui-message-item",[e._v("密码不能为空")])],1)],1)],1):e._e(),e._v(" "),t("sui-form-field",[t("sui-button",{attrs:{fluid:"",disabled:!(!e.form.loading&&!e.form.sec60),loading:e.form.loading,icon:e.form.sec60?"check":"none",color:e.form.sec60?"green":"blue"}},[e.form.sec60?t("span",[e._v("邮件已发送，"+e._s(e.form.sec60)+" 秒后可以重新发送邮件")]):t("span",[e._v("发送验证邮件")])])],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);