(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{864:function(e,r,o){"use strict";o.r(r);var t=o(20),n={auth:"guest",head:function(){return{title:"忘记密码 - Saiblo"}},data:function(){return{form:{username:"",password:"",confirm_password:"",token:""},loading:!1,isOK:!1,err_code:0}},validations:{form:{username:{},password:{required:t.required},confirm_password:{required:t.required,sameAs:Object(t.sameAs)("password")}}},watch:{"form.password":function(){this.err_code=0}},created:function(){this.form.username=this.$route.query.username,this.form.token=this.$route.query.token},methods:{send_new_password:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(this.loading=!0,this.$axios.post("/api/users/".concat(this.form.username,"/reset_password/"),this.form).then((function(){e.err_code=0,e.isOK=!0,e.$notify.success({message:"重置密码成功，跳转回登录界面...",title:"成功",timeout:1e3}),setTimeout((function(){e.$router.push({path:"/login"})}),1e3)})).catch((function(r){e.err_code=r.response.status})).then((function(){e.loading=!1})))}}},d=o(7),component=Object(d.a)(n,(function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("sui-grid",{attrs:{centered:""}},[o("sui-grid-column",{attrs:{computer:7,tablet:10,mobile:16}},[o("sui-segment",[o("sui-header",{tag:"h2",attrs:{"text-align":"center"}},[e._v("\n        重置密码\n      ")]),e._v(" "),o("sui-step-group",{attrs:{fluid:"",size:"mini"}},[o("sui-step",{attrs:{icon:"paper plane"}},[o("sui-step-content",[o("sui-step-title",[e._v("发送邮件")]),e._v(" "),o("sui-step-description",[e._v("发送邮件进行验证")])],1)],1),e._v(" "),o("sui-step",{attrs:{active:"",icon:"check"}},[o("sui-step-content",[o("sui-step-title",[e._v("设置密码")]),e._v(" "),o("sui-step-description",[e._v("重新设置新的密码")])],1)],1)],1),e._v(" "),o("sui-form",{attrs:{method:"post",autocomplete:"off"},on:{submit:function(r){return r.preventDefault(),e.send_new_password(r)}}},[o("sui-form-field",[o("sui-input",{attrs:{disabled:"","icon-position":"left",icon:"user",placeholder:"用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),o("sui-form-field",{attrs:{error:!(!e.$v.form.password.$error&&!e.err_code)}},[o("sui-input",{attrs:{disabled:e.loading||e.isOK,"icon-position":"left",icon:"lock",placeholder:"密码",type:"password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),o("sui-form-field",{attrs:{error:!(!e.$v.form.confirm_password.$error&&!e.err_code)}},[o("sui-input",{attrs:{disabled:e.loading||e.isOK,"icon-position":"left",icon:"check",placeholder:"确认密码",type:"password"},model:{value:e.form.confirm_password,callback:function(r){e.$set(e.form,"confirm_password",r)},expression:"form.confirm_password"}})],1),e._v(" "),e.$v.form.password.$error||e.$v.form.confirm_password.$error?o("sui-form-field",[o("sui-message",{attrs:{negative:""}},[o("sui-message-list",[e.$v.form.password.required?e._e():o("sui-message-item",[e._v("\n                密码不能为空\n              ")]),e._v(" "),e.$v.form.confirm_password.required?e._e():o("sui-message-item",[e._v("\n                确认密码不能为空\n              ")]),e._v(" "),e.$v.form.password.required&&e.$v.form.confirm_password.required&&!e.$v.form.confirm_password.sameAsPassword?o("sui-message-item",[e._v("\n                两次密码填写不一致\n              ")]):e._e()],1)],1)],1):e._e(),e._v(" "),o("sui-form-field",[o("sui-button",{attrs:{fluid:"",disabled:e.form.loading||e.form.isOK,loading:e.form.loading,icon:e.form.isOK?"check":"none",color:e.form.isOK?"green":"blue"}},[e.form.isOK?e._e():o("span",[e._v("重置密码")])])],1)],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);