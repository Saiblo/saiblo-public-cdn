(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{859:function(t,e,n){"use strict";n.r(e);n(113);var r=n(822),o=n.n(r),c={head:function(){return{title:this.game.alias+" - Saiblo"}},data:function(){return{id:1,game:{},plays:[]}},computed:{isManager:function(){if(!this.$auth.$state.loggedIn)return!1;for(var i=0;i<this.game.managers.length;++i)if(this.game.managers[i]==this.$auth.$state.user.username)return!0;return!1},introductionHTML:function(){return o()(this.game.introduction)}},asyncData:function(t){var e=t.route,n=t.app,r=t.error;return n.$axios.get("/api/games/".concat(e.params.id,"/")).then((function(t){return{game:t.data}}),(function(){r({statusCode:404,message:"没有这个游戏"})}))},created:function(){this.$route.query.id&&(this.id=this.$route.query.id)},methods:{isActive:function(t){return this.id==t},select:function(t){this.id=t;var e=this.$route.path+"?";for(var n in this.$route.query)"id"!=n&&(e+=n+"="+this.$route.query[n]+"&");this.$router.push(e+"id="+this.id)},download_file:function(t){this.$axios({url:t,method:"GET",responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a"),r=t.headers["content-disposition"].match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g)[0];r=r.substr(10,r.length-11),n.href=e,n.setAttribute("download",r),document.body.appendChild(n),n.click()}))}}},d=n(7),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("sui-breadcrumb",[n("sui-breadcrumb-section",{tag:"nuxt-link",attrs:{to:"/games"}},[t._v("游戏")]),t._v(" "),n("sui-breadcrumb-divider",{attrs:{icon:"right chevron"}}),t._v(" "),n("sui-breadcrumb-section",{attrs:{active:""}},[t._v(t._s(t.game.alias))])],1),t._v(" "),n("sui-grid",[n("sui-grid-row",[n("sui-grid-column",[n("sui-header",{tag:"h1",staticClass:"ib",staticStyle:{"margin-bottom":"0"}},[n("sui-header-content",[t._v(t._s(t.game.alias))]),t._v(" "),n("sui-header-subheader",{staticStyle:{display:"inline"}},[t._v("("+t._s(t.game.name)+")")])],1),t._v(" "),n("sui-button",{staticStyle:{float:"right"},attrs:{size:"small",color:"teal",icon:"download"},nativeOn:{click:function(e){return t.download_file(t.game.url)}}},[t._v("下载游戏包")])],1)],1),t._v(" "),n("sui-grid-row",[n("sui-grid-column",[n("sui-menu",{attrs:{fluid:"",attached:"top",tabular:""}},[n("sui-menu-item",{tag:"a",attrs:{active:t.isActive(1)},on:{click:function(e){return t.select(1)}}},[t._v("详情")]),t._v(" "),n("sui-menu-item",{tag:"a",attrs:{active:t.isActive(2)},on:{click:function(e){return t.select(2)}}},[t._v("对局")]),t._v(" "),n("sui-menu-item",{tag:"a",attrs:{active:t.isActive(3)},on:{click:function(e){return t.select(3)}}},[t._v("我的AI")]),t._v(" "),n("sui-menu-item",{tag:"nuxt-link",attrs:{to:"/game/"+t.game.id+"/ranklist"}},[t._v("排行榜")])],1),t._v(" "),n("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(1),expression:"isActive(1)"}],attrs:{attached:"bottom"}},[t.isManager?n("sui-label",{tag:"nuxt-link",attrs:{color:"blue",to:"/game/"+t.game.id+"/edit",ribbon:"right",size:"large",icon:"edit"}},[t._v("编辑资料")]):t._e(),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.introductionHTML)}})],1),t._v(" "),n("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(2),expression:"isActive(2)"}],attrs:{attached:"bottom"}},[n("match-list",{attrs:{"game-id":t.game.id}})],1),t._v(" "),n("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(3),expression:"isActive(3)"}],attrs:{attached:"bottom"}},[n("ai-list",{attrs:{"game-id":t.game.id,"allow-remote":t.game.allow_remote}})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);