(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{911:function(t,e,r){"use strict";r.r(e);r(119);var n=r(845),o=r.n(n),c={head:function(){return{title:this.game.alias+" - Saiblo"}},data:function(){return{id:1,game:{},plays:[]}},computed:{isManager:function(){if(!this.$auth.$state.loggedIn)return!1;for(var i=0;i<this.game.managers.length;++i)if(this.game.managers[i]==this.$auth.$state.user.username)return!0;return!1},introductionHTML:function(){return o()(this.game.introduction)}},asyncData:function(t){var e=t.route,r=t.app,n=t.error;return r.$axios.get("/api/games/".concat(e.params.id,"/")).then((function(t){return{game:t.data}}),(function(){n({statusCode:404,message:"没有这个游戏"})}))},created:function(){this.$route.query.id&&(this.id=this.$route.query.id)},methods:{isActive:function(t){return this.id==t},select:function(t){this.id=t;var e=this.$route.path+"?";for(var r in this.$route.query)"id"!=r&&(e+=r+"="+this.$route.query[r]+"&");this.$router.push(e+"id="+this.id)},download_file:function(t){this.$axios({url:t,method:"GET",responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a"),n=t.headers["content-disposition"].match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g)[0];n=n.substr(10,n.length-11),r.href=e,r.setAttribute("download",n),document.body.appendChild(r),r.click()}))}}},l=r(7),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("sui-breadcrumb",[r("sui-breadcrumb-section",{tag:"nuxt-link",attrs:{to:"/games"}},[t._v("游戏")]),t._v(" "),r("sui-breadcrumb-divider",{attrs:{icon:"right chevron"}}),t._v(" "),r("sui-breadcrumb-section",{attrs:{active:""}},[t._v(t._s(t.game.alias))])],1),t._v(" "),r("sui-grid",[r("sui-grid-row",[r("sui-grid-column",[r("sui-header",{tag:"h1",staticClass:"ib",staticStyle:{"margin-bottom":"0"}},[r("sui-header-content",[t._v(t._s(t.game.alias))]),t._v(" "),r("sui-header-subheader",{staticStyle:{display:"inline"}},[t._v("("+t._s(t.game.name)+")")])],1),t._v(" "),t.game.url&&""!==t.game.url?r("sui-button",{tag:"a",staticStyle:{float:"right"},attrs:{size:"small",color:"teal",icon:"download",target:"_blank",href:t.game.url.startsWith("http")?t.game.url:t.$getAPIUrl(t.game.url)}},[t._v("下载游戏包")]):r("sui-button",{staticStyle:{float:"right"},attrs:{size:"small",color:"teal",icon:"download",disabled:""}},[t._v("没有游戏包")])],1)],1),t._v(" "),r("sui-grid-row",[r("sui-grid-column",[r("sui-menu",{attrs:{fluid:"",attached:"top",tabular:""}},[r("sui-menu-item",{tag:"a",attrs:{active:t.isActive(1)},on:{click:function(e){return t.select(1)}}},[t._v("详情")]),t._v(" "),r("sui-menu-item",{tag:"a",attrs:{active:t.isActive(2)},on:{click:function(e){return t.select(2)}}},[t._v("对局")]),t._v(" "),r("sui-menu-item",{tag:"a",attrs:{active:t.isActive(3)},on:{click:function(e){return t.select(3)}}},[t._v("我的AI")]),t._v(" "),r("sui-menu-item",{tag:"nuxt-link",attrs:{to:"/game/"+t.game.id+"/ranklist"}},[t._v("全局排行榜")])],1),t._v(" "),r("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(1),expression:"isActive(1)"}],attrs:{attached:"bottom"}},[t.isManager?r("sui-label",{tag:"nuxt-link",attrs:{color:"blue",to:"/game/"+t.game.id+"/edit",ribbon:"right",size:"large",icon:"edit"}},[t._v("编辑资料")]):t._e(),t._v(" "),r("div",{domProps:{innerHTML:t._s(t.introductionHTML)}})],1),t._v(" "),r("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(2),expression:"isActive(2)"}],attrs:{attached:"bottom"}},[r("match-list",{attrs:{"game-id":t.game.id}})],1),t._v(" "),r("sui-segment",{directives:[{name:"show",rawName:"v-show",value:t.isActive(3),expression:"isActive(3)"}],attrs:{attached:"bottom"}},[r("ai-list",{attrs:{"game-id":t.game.id,"allow-remote":t.game.allow_remote}})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);