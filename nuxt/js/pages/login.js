(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{893:function(e,r,t){"use strict";t.r(r);var o=t(23),n={auth:"guest",head:function(){return{title:"登陆 - Saiblo"}},data:function(){return{form:{username:"",password:""},isLoading:!1,isOK:!1,err_code:0}},watch:{"form.username":function(){this.err_code=0},"form.password":function(){this.err_code=0}},mounted:function(){this.$refs.username.$refs.input.focus()},validations:{form:{username:{required:o.required},password:{required:o.required}}},methods:{login:function(){var e=this;this.$v.$touch(),this.$v.$invalid||(this.isLoading=!0,this.$auth.loginWith("local",{data:this.form}).then((function(){e.err_code=0,e.isOK=!0,e.$notify.success({message:"登录成功",title:"成功",timeout:1e3})})).catch((function(r){e.err_code=r.response.status,401===e.err_code&&-1!==r.response.data.err_msg.indexOf("验证")&&e.$router.push("/validate_email?username=".concat(e.form.username))})).then((function(){e.isLoading=!1})))}}},d=t(7),component=Object(d.a)(n,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("sui-grid",[t("sui-grid-column",{attrs:{computer:7,tablet:10,mobile:16,centered:""}},[t("sui-segment",[t("sui-header",{tag:"h2",attrs:{"text-align":"center"}},[e._v("登录")]),e._v(" "),t("sui-form",{attrs:{id:"form",method:"post",autocomplete:"off"},on:{submit:function(r){return r.preventDefault(),e.login(r)}}},[t("sui-form-field",{attrs:{error:!(!e.$v.form.username.$error&&!e.err_code)}},[t("sui-input",{ref:"username",attrs:{disabled:e.isLoading||e.isOK,"icon-position":"left",icon:"user",placeholder:"用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("sui-form-field",{attrs:{error:!(!e.$v.form.password.$error&&!e.err_code)}},[t("sui-input",{attrs:{disabled:e.isLoading||e.isOK,"icon-position":"left",icon:"lock",placeholder:"密码",type:"password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("sui-form-fields",{attrs:{fields:2}},[t("sui-form-field",[t("sui-button",{attrs:{fluid:"",disabled:e.isLoading||e.isOK,loading:e.isLoading,icon:e.isOK?"check":"none",color:e.isOK?"green":"blue"}},[e.isOK?e._e():t("span",[e._v("登录")])])],1),e._v(" "),t("sui-form-field",[t("sui-button",{tag:"nuxt-link",attrs:{fluid:"",to:"/register"}},[e._v("注册")])],1)],1),e._v(" "),e.$v.form.username.$error||e.$v.form.password.$error?t("sui-form-field",{staticStyle:{"text-align":"center"}},[t("sui-message",{attrs:{negative:"",content:"用户名或者密码不能为空"}})],1):e._e()],1)],1),e._v(" "),t("sui-container",{attrs:{"text-align":"center"}},[e._v(" 忘记密码？"),t("nuxt-link",{attrs:{to:"/forget_password"}},[e._v("点击这里")])],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);